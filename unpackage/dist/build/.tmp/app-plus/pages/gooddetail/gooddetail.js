(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/gooddetail/gooddetail"],{"23b8":function(o,t,e){"use strict";(function(o,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(e("b1bb"));i(e("4f2f"));function i(o){return o&&o.__esModule?o:{default:o}}var s=function(){return e.e("components/uni-goods-nav/uni-goods-nav").then(e.bind(null,"aaa7"))},r={components:{uniGoodsNav:s},data:function(){return{options:[{icon:"../../static/unselectcart.png",text:"",info:0},{icon:"",text:""},{icon:"",text:""}],buttonGroup:[{text:"加入购物车",backgroundColor:"#ff0000",color:"#fff",id:1},{text:"立即购买",backgroundColor:"#ffa200",color:"#fff",id:2}],nodes:[],goods:{name:"日常保洁月卡（4次每次3小时）",defaultSourceImagePath:"",pid:1,marketPrice:2568,originalPrice:3e3,monthSalesCount:3,store:50,freezeStore:20,producingArea:"青藏高原",promoteMessage:"每次派1名家政人员工作3小时（100平米内）。办卡仅限同一地址使用",promotionInfo:"一张月卡可以使用四次",maiwan:!1},supplier:{id:1,companyName:"’家政服务",address:"南宁市西乡塘区北湖南路28号",businessHours:"08:00-18:00",contactPhone:"15077144027"}}},onLoad:function(t){o("log",t.goodId," at pages\\gooddetail\\gooddetail.vue:142");var e={id:t.goodId};this.getGoods(e)},onShow:function(){"undefined"!=n.getStorageSync("accessToken")&&null!=n.getStorageSync("accessToken")&&""!=n.getStorageSync("accessToken")&&this.getCartNum()},filters:{nullFilter:function(o){if(null==o||"null"==o)return""}},methods:{onClick:function(o){this.toCart()},buttonClick:function(o){this.goods.maiwan?n.showToast({title:"商品库存不足",duration:2e3}):1==o.content.id?this.addCart():2==o.content.id&&this.toPreorder()},getCartNum:function(){var o=this;this.$api.getCartNum().then(function(t){"0000"==t.code&&(o.options[0].info=t.cartNum)})},getGoods:function(t){var e=this;this.$api.gooddetail(t).then(function(t){if(o("log",JSON.stringify(t)," at pages\\gooddetail\\gooddetail.vue:193"),o("log",e.$config.imghosturl," at pages\\gooddetail\\gooddetail.vue:194"),"0000"==t.code){var n=t.good;n.defaultSourceImagePath=e.$config.imghosturl+n.defaultSourceImagePath,e.goods=n,e.supplier=n.supplier,1==n.isMaiwan&&(e.buttonGroup[1].backgroundColor="grey"),null!=n.introduction&&e.getData(n.introduction)}})},addCart:function(){var t=this;if("undefined"==n.getStorageSync("accessToken")||null==n.getStorageSync("accessToken")||""==n.getStorageSync("accessToken"))n.navigateTo({url:"/pages/login/login"});else{var e={pid:this.goods.pid};o("log","data==="+JSON.stringify(e)," at pages\\gooddetail\\gooddetail.vue:214"),this.$api.ajaxAdd(e).then(function(e){o("log",JSON.stringify(e)," at pages\\gooddetail\\gooddetail.vue:217"),"0000"==e.code?(t.options[0].info++,n.showToast({title:"添加成功",duration:2e3})):"0001"==e.code?n.showToast({title:e.message,duration:2e3}):n.showToast({title:"添加失败",duration:2e3})})}},toPreorder:function(){"undefined"!=n.getStorageSync("accessToken")&&null!=n.getStorageSync("accessToken")&&""!=n.getStorageSync("accessToken")?(o("log","this.goods.isManwan==="+this.goods.isMaiwan," at pages\\gooddetail\\gooddetail.vue:241"),n.navigateTo({url:"/pages/preorder/preorder?pids="+this.goods.pid+"@@@&buyType=buyNow"})):n.navigateTo({url:"/pages/login/login"})},toShopDetail:function(o){n.navigateTo({url:"/pages/shopdetail/shopdetail?shopId="+o})},toCart:function(){n.switchTab({url:"/pages/carts/carts"})},getData:function(o){o=-1==o.indexOf("http://www.haiyunzy.com")?o.replace(new RegExp(/src=\"/g),'style="display: block;margin: 0 auto;max-width: 100%" src="http://www.haiyunzy.com'):o.replace(new RegExp(/src=\"/g),'style="display: block;margin: 0 auto;max-width: 100%" src="'),this.nodes=(0,a.default)(o)}}};t.default=r}).call(this,e("0de9")["default"],e("6e42")["default"])},"524b":function(o,t,e){"use strict";var n={"uni-goods-nav":()=>e.e("components/uni-goods-nav/uni-goods-nav").then(e.bind(null,"aaa7"))},a=function(){var o=this,t=o.$createElement,e=(o._self._c,o._f("nullFilter")(o.goods.producingArea));o.$mp.data=Object.assign({},{$root:{f0:e}})},i=[];e.d(t,"b",function(){return a}),e.d(t,"c",function(){return i}),e.d(t,"a",function(){return n})},"71a6":function(o,t,e){"use strict";e.r(t);var n=e("23b8"),a=e.n(n);for(var i in n)"default"!==i&&function(o){e.d(t,o,function(){return n[o]})}(i);t["default"]=a.a},"8a5e":function(o,t,e){"use strict";var n=e("e9e6"),a=e.n(n);a.a},ab37:function(o,t,e){"use strict";(function(o){e("7656"),e("921b");n(e("66fd"));var t=n(e("ca35"));function n(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,e("6e42")["createPage"])},ca35:function(o,t,e){"use strict";e.r(t);var n=e("524b"),a=e("71a6");for(var i in a)"default"!==i&&function(o){e.d(t,o,function(){return a[o]})}(i);e("8a5e");var s,r=e("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=u.exports},e9e6:function(o,t,e){}},[["ab37","common/runtime","common/vendor"]]]);