(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shoplist/shoplist"],{"1c6c":function(t,e,o){"use strict";o.r(e);var s=o("de72"),i=o("2be6");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("f470");var n,r=o("f0c5"),u=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],n);e["default"]=u.exports},"29e4":function(t,e,o){},"2be6":function(t,e,o){"use strict";o.r(e);var s=o("b33a"),i=o.n(s);for(var a in s)"default"!==a&&function(t){o.d(e,t,function(){return s[t]})}(a);e["default"]=i.a},"51d6":function(t,e,o){"use strict";(function(t){o("7656"),o("921b");s(o("66fd"));var e=s(o("1c6c"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},b33a:function(t,e,o){"use strict";(function(t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(o("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function n(t,e,o,s,i,a,n){try{var r=t[a](n),u=r.value}catch(l){return void o(l)}r.done?e(u):Promise.resolve(u).then(s,i)}function r(t){return function(){var e=this,o=arguments;return new Promise(function(s,i){var a=t.apply(e,o);function r(t){n(a,s,i,r,u,"next",t)}function u(t){n(a,s,i,r,u,"throw",t)}r(void 0)})}}var u=function(){return o.e("components/mehaotian-search-revision/mehaotian-search-revision").then(o.bind(null,"6d32"))},l=function(){return o.e("components/back-top/back-top").then(o.bind(null,"c33e"))},c={components:{backTop:l,mSearch:u},data:function(){return{defaultKeyword:"",keyword:"",oldKeywordList:[],hotKeywordList:[],keywordList:[],forbid:"",isShowKeywordList:!1,goodslistbox:!0,shSearchbox:!0,address:"海韵之友",longitude:"",latitude:"",supplierList:[],backTop:{src:"../../static/back-top/top.png",scrollTop:0},scrollTop:0,queryData:{name:"",pageNo:1,pageSize:15,totalPage:0,lng:108.31921622874788,lat:22.84313111680098}}},onLoad:function(){this.getLocationInfo()},onShow:function(){this.getshopList(this.queryData,!0)},methods:{getLocationInfo:function(){var e=r(i.default.mark(function e(){var o;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=this,e.next=3,t.getLocation({type:"wgs84",geocode:!0,success:function(e){s("log","当前位置的经度："+JSON.stringify(e)," at pages\\shoplist\\shoplist.vue:158"),o.queryData.lng=e.longitude,o.queryData.lat=e.latitude;var i=e.address.street;o.address=i,t.hideLoading(),o.getshopList(o.queryData,!0)},fail:function(){t.hideLoading()},complete:function(){t.hideLoading()}});case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));function o(){return e.apply(this,arguments)}return o}(),getshopList:function(){var t=r(i.default.mark(function t(e,o){var a,n;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s("log",JSON.stringify(e)," at pages\\shoplist\\shoplist.vue:198"),t.next=3,this.$api.shoplist(e);case 3:if(a=t.sent,s("log",JSON.stringify(a)," at pages\\shoplist\\shoplist.vue:200"),"0000"==a.code&&null!=a.list&&0!=a.list.length){t.next=7;break}return t.abrupt("return");case 7:this.queryData.totalPage=a.total,n=a.list,this.supplierList=o?n:this.supplierList.concat(n);case 10:case"end":return t.stop()}},t,this)}));function e(e,o){return t.apply(this,arguments)}return e}(),toShopDetail:function(e){t.navigateTo({url:"/pages/shopdetail/shopdetail?shopId="+e})},firstPage:function(){t.redirectTo({url:"/pages/index/index"})},shoplist:function(){t.redirectTo({url:"/pages/shoplist/shoplist"})},toCart:function(){t.redirectTo({url:"/pages/carts/carts"})},toMyCenter:function(){t.redirectTo({url:"/pages/mycenter/mycenter"})},blur:function(){t.hideKeyboard()},loadDefaultKeyword:function(){this.defaultKeyword="真龙"},loadOldKeyword:function(){var e=this;t.getStorage({key:"OldKeys_shop_shop_shop",success:function(t){var o=JSON.parse(t.data);e.oldKeywordList=o}})},loadHotKeyword:function(){this.hotKeywordList=["海韵","家政"]},inputChange:function(t){var e=t.detail?t.detail.value:t;if(!e)return this.keywordList=[],void(this.isShowKeywordList=!1);this.isShowKeywordList=!0,this.keywordList=[]},drawCorrelativeKeyword:function(t,e){for(var o=t.length,s=[],i=0;i<o;i++){var a=t[i],n=a[0].replace(e,"<span style='color: #9f9f9f;'>"+e+"</span>");n="<div>"+n+"</div>";var r={keyword:a[0],htmlStr:n};s.push(r)}return s},setkeyword:function(t){this.keyword=t.keyword},oldDelete:function(){var e=this;t.showModal({content:"确定清除历史搜索记录？",success:function(o){o.confirm?(s("log","用户点击确定"," at pages\\shoplist\\shoplist.vue:312"),e.oldKeywordList=[],t.removeStorage({key:"OldKeys_shop_shop"})):o.cancel&&s("log","用户点击取消"," at pages\\shoplist\\shoplist.vue:318")}})},hotToggle:function(){this.forbid=this.forbid?"":"_forbid"},sboxblur:function(){this.goodslistbox=!0,this.shSearchbox=!0,this.forbid=""},doSearch:function(t){t=t||(this.keyword?this.keyword:this.defaultKeyword),this.queryData.name=t,this.saveKeyword(t),this.goodslistbox=!0,this.shSearchbox=!1,this.getshopList(this.queryData,!0)},saveKeyword:function(e){var o=this;t.getStorage({key:"OldKeys_shop",success:function(i){s("log",i.data," at pages\\shoplist\\shoplist.vue:348");var a=JSON.parse(i.data),n=a.indexOf(e);-1==n?a.unshift(e):(a.splice(n,1),a.unshift(e)),a.length>10&&a.pop(),t.setStorage({key:"OldKeys_shop",data:JSON.stringify(a)}),o.oldKeywordList=a},fail:function(s){var i=[e];t.setStorage({key:"OldKeys_shop",data:JSON.stringify(i)}),o.oldKeywordList=i}})}},onPageScroll:function(t){this.backTop.scrollTop=t.scrollTop},onPullDownRefresh:function(){this.queryData.pageNo=1,this.queryData.totalPage=0,this.getshopList(this.queryData,!0),t.stopPullDownRefresh()},onReachBottom:function(){return!(this.queryData.pageNo>this.queryData.totalPage)&&(this.queryData.pageNo=this.queryData.pageNo+1,s("log","pageNo==="+this.queryData.pageNo," at pages\\shoplist\\shoplist.vue:395"),s("log","totalPage==="+this.queryData.totalPage," at pages\\shoplist\\shoplist.vue:396"),!(this.queryData.pageNo>this.queryData.totalPage)&&void this.getshopList(this.queryData,!1))}};e.default=c}).call(this,o("6e42")["default"],o("0de9")["default"])},de72:function(t,e,o){"use strict";var s,i=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"b",function(){return i}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return s})},f470:function(t,e,o){"use strict";var s=o("29e4"),i=o.n(s);i.a}},[["51d6","common/runtime","common/vendor"]]]);