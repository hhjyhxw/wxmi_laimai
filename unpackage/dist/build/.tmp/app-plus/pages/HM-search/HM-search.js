(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/HM-search/HM-search"],{1222:function(t,e,o){"use strict";var a,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];o.d(e,"b",function(){return i}),o.d(e,"c",function(){return r}),o.d(e,"a",function(){return a})},"1e59":function(t,e,o){"use strict";o.r(e);var a=o("1222"),i=o("fdc6");for(var r in i)"default"!==r&&function(t){o.d(e,t,function(){return i[t]})}(r);o("4ab6");var s,n=o("f0c5"),u=Object(n["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=u.exports},"22f0":function(t,e,o){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(o("a34a"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,o,a,i,r,s){try{var n=t[r](s),u=n.value}catch(c){return void o(c)}n.done?e(u):Promise.resolve(u).then(a,i)}function n(t){return function(){var e=this,o=arguments;return new Promise(function(a,i){var r=t.apply(e,o);function n(t){s(r,a,i,n,u,"next",t)}function u(t){s(r,a,i,n,u,"throw",t)}n(void 0)})}}var u=function(){return o.e("components/mehaotian-search-revision/mehaotian-search-revision").then(o.bind(null,"6d32"))},c=function(){return o.e("components/navTab").then(o.bind(null,"47b6"))},d=function(){return o.e("components/back-top/back-top").then(o.bind(null,"c33e"))},l={components:{mSearch:u,navTab:c,backTop:d},data:function(){return{defaultKeyword:"",keyword:"",oldKeywordList:[],hotKeywordList:[],keywordList:[],forbid:"",isShowKeywordList:!1,goodslistbox:!1,shSearchbox:!0,currentTab:0,tabTitle:["默认","热门","新品","促销","优选"],goodList:[],queryData:{pageNo:1,pageSize:10,totalPage:0,isHot:"",isNew:"",isDiscount:"",isSelect:"",keyword:""},backTop:{src:"../../static/back-top/top.png",scrollTop:0},scrollTop:0}},onLoad:function(t){this.init(),null!=t.keyword&&void 0!=t.keyword&&""!=t.keyword&&this.doSearch(t.keyword)},filters:{nullPriceFilter:function(t){if(null==t||"null"==t)return""}},methods:{init:function(){this.loadDefaultKeyword(),this.loadOldKeyword(),this.loadHotKeyword()},toGoodsDetail:function(e){t.navigateTo({url:"/pages/gooddetail/gooddetail?goodId="+e})},changeTab:function(t){this.currentTab=t,0==t&&(this.queryData.isHot="",this.queryData.isNew="",this.queryData.isDiscount="",this.queryData.isSelect=""),1==t&&(this.queryData.isHot=1,this.queryData.isNew="",this.queryData.isDiscount="",this.queryData.isSelect=""),2==t&&(this.queryData.isHot="",this.queryData.isNew=1,this.queryData.isDiscount="",this.queryData.isSelect=""),3==t&&(this.queryData.isHot="",this.queryData.isNew="",this.queryData.isDiscount=1,this.queryData.isSelect=""),4==t&&(this.queryData.isHot="",this.queryData.isNew="",this.queryData.isDiscount="",this.queryData.isSelect=1),this.queryData.pageNo=1,this.getGoodlistByKeyword(this.queryData,!0)},blur:function(){t.hideKeyboard()},loadDefaultKeyword:function(){this.defaultKeyword="真龙"},loadOldKeyword:function(){var e=this;t.getStorage({key:"OldKeys",success:function(t){var o=JSON.parse(t.data);e.oldKeywordList=o}})},loadHotKeyword:function(){this.hotKeywordList=["海韵玉香丝","芒果","九百万矿泉水","今世缘","香脆小吃","家政","牛肉","香蕉","草莓"]},inputChange:function(t){var e=t.detail?t.detail.value:t;if(!e)return this.keywordList=[],void(this.isShowKeywordList=!1);this.isShowKeywordList=!0,this.keywordList=[]},drawCorrelativeKeyword:function(t,e){for(var o=t.length,a=[],i=0;i<o;i++){var r=t[i],s=r[0].replace(e,"<span style='color: #9f9f9f;'>"+e+"</span>");s="<div>"+s+"</div>";var n={keyword:r[0],htmlStr:s};a.push(n)}return a},setkeyword:function(t){this.keyword=t.keyword},oldDelete:function(){var e=this;t.showModal({content:"确定清除历史搜索记录？",success:function(o){o.confirm?(a("log","用户点击确定"," at pages\\HM-search\\HM-search.vue:269"),e.oldKeywordList=[],t.removeStorage({key:"OldKeys"})):o.cancel&&a("log","用户点击取消"," at pages\\HM-search\\HM-search.vue:275")}})},hotToggle:function(){this.forbid=this.forbid?"":"_forbid"},sboxblur:function(){this.goodslistbox=!1,this.shSearchbox=!0,this.forbid=""},doSearch:function(t){t=t||(this.keyword?this.keyword:this.defaultKeyword),this.keyword=t,this.saveKeyword(t),this.goodslistbox=!0,this.shSearchbox=!1,this.queryData.keyword=t,this.getGoodlistByKeyword(this.queryData,!0)},saveKeyword:function(e){var o=this;t.getStorage({key:"OldKeys",success:function(i){a("log",i.data," at pages\\HM-search\\HM-search.vue:318");var r=JSON.parse(i.data),s=r.indexOf(e);-1==s?r.unshift(e):(r.splice(s,1),r.unshift(e)),r.length>10&&r.pop(),t.setStorage({key:"OldKeys",data:JSON.stringify(r)}),o.oldKeywordList=r},fail:function(a){var i=[e];t.setStorage({key:"OldKeys",data:JSON.stringify(i)}),o.oldKeywordList=i}})},getGoodlistByKeyword:function(){var t=n(i.default.mark(function t(e,o){var r,s,n=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a("log",JSON.stringify(e)," at pages\\HM-search\\HM-search.vue:348"),t.next=3,this.$api.getGoodlistByKeyword(e);case 3:if(r=t.sent,a("log",JSON.stringify(r)," at pages\\HM-search\\HM-search.vue:350"),"0000"==r.code){t.next=7;break}return t.abrupt("return");case 7:this.queryData.totalPage=r.total,s=r.list,s.forEach(function(t){return t.defaultSourceImagePath=n.$config.imghosturl+t.defaultSourceImagePath}),this.goodList=o?s:this.goodList.concat(s);case 11:case"end":return t.stop()}},t,this)}));function e(e,o){return t.apply(this,arguments)}return e}()},onPageScroll:function(t){this.backTop.scrollTop=t.scrollTop},onPullDownRefresh:function(){this.queryData.pageNo=1,this.queryData.totalPage=0,this.getGoodlistByKeyword(this.queryData,!0);try{t.stopPullDownRefresh()}catch(e){}},onReachBottom:function(){return!(this.queryData.pageNo>this.queryData.totalPage)&&(this.queryData.pageNo=this.queryData.pageNo+1,a("log","pageNo==="+this.queryData.pageNo," at pages\\HM-search\\HM-search.vue:386"),a("log","totalPage==="+this.queryData.totalPage," at pages\\HM-search\\HM-search.vue:387"),!(this.queryData.pageNo>this.queryData.totalPage)&&void this.getGoodlistByKeyword(this.queryData,!1))}};e.default=l}).call(this,o("6e42")["default"],o("0de9")["default"])},"4ab6":function(t,e,o){"use strict";var a=o("7d54"),i=o.n(a);i.a},"7d54":function(t,e,o){},8923:function(t,e,o){"use strict";(function(t){o("7656"),o("921b");a(o("66fd"));var e=a(o("1e59"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},fdc6:function(t,e,o){"use strict";o.r(e);var a=o("22f0"),i=o.n(a);for(var r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r);e["default"]=i.a}},[["8923","common/runtime","common/vendor"]]]);